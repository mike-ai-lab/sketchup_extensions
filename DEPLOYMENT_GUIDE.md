# Vercel Deployment Guide

## Quick Fix Summary
The website was showing raw JavaScript code instead of the frontend because of incorrect Vercel configuration.

## Key Files Fixed

### 1. vercel.json
```json
{
  "buildCommand": "pnpm build",
  "outputDirectory": "dist/public",
  "installCommand": "pnpm install"
}
```

### 2. package.json (pnpm section)
```json
"pnpm": {
  "patchedDependencies": {
    "wouter@3.7.1": "patches/wouter@3.7.1.patch"
  },
  "overrides": {
    "tailwindcss>nanoid": "3.3.7"
  },
  "onlyBuiltDependencies": ["@tailwindcss/oxide", "better-sqlite3", "esbuild"]
}
```

### 3. Favicon Setup
- Created `/public/favicon.ico` in project root
- Updated `client/index.html` to reference `/favicon.svg`

## Build Process
1. `pnpm build` creates files in `dist/public/`
2. Vercel serves static files from `dist/public/`
3. Server code builds to `dist/index.js`

## Domain Setup
1. **Custom Domain**: Set nameservers to:
   - `ns1.vercel-dns.com`
   - `ns2.vercel-dns.com`
2. **SSL**: Auto-generated by Vercel (takes 5-15 minutes)

## Deployment Commands
```bash
git add .
git commit -m "Your message"
git push
```
Vercel auto-deploys on push to main branch.

## Common Issues & Solutions

### Issue: Website shows code instead of frontend
**Solution**: Ensure `vercel.json` has correct `outputDirectory` matching your build output.

### Issue: 404 favicon error
**Solution**: Add favicon to `/public/` directory in project root.

### Issue: pnpm build script warnings
**Solution**: Add `onlyBuiltDependencies` array to `package.json` pnpm section.

### Issue: Custom domain not working
**Solution**: Update nameservers at domain registrar, wait for DNS propagation.

## Project Structure
```
├── client/           # Frontend React app
├── server/           # Backend Express/tRPC
├── dist/
│   ├── public/       # Built frontend (served by Vercel)
│   └── index.js      # Built server
├── public/           # Static assets for Vercel
└── vercel.json       # Deployment config
```

## Live URLs
- Main: https://mimevents.com
- Vercel: https://sketchup-extensions.vercel.app

## Emergency Rollback
If deployment breaks:
1. Revert `vercel.json` to working version
2. `git add vercel.json && git commit -m "Rollback" && git push`
3. Wait 2 minutes for redeploy